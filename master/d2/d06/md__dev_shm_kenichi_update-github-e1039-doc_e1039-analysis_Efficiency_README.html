<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>Class Reference for E1039 Core &amp; Analysis Software: A simple example of getting the efficiency of non-tracking detectors</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" /> 
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								Class Reference for E1039 Core &amp; Analysis Software
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/d06/md__dev_shm_kenichi_update-github-e1039-doc_e1039-analysis_Efficiency_README.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">A simple example of getting the efficiency of non-tracking detectors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Note: this module is intended to demonstrate how to use the reconstructed cosmic muons to calculate the efficiency of the detectors that do not participate in the tracking process. The user needs to be careful to add more cuts/controls to make sure the detector is not somehow required in the trigger/reconstruction and thus bias the efficiency measurement. Since in the cosmic ray reconstruction, no hodoscope masking or prop tube matching is required, it should be relatively straightforward.</p>
<h2>Structure</h2>
<p>This directory contains the following parts:</p>
<ul>
<li><code><a class="el" href="../../df/dbc/run_8C.html">run.C</a></code> serves as the main macro that calls the analysis module;</li>
<li><code><a class="el" href="../../dc/da8/classAnaModule.html">AnaModule</a></code> is an example module to demonstrate the usage of <code><a class="el" href="../../d2/d26/classTracklet.html">Tracklet</a></code> class for efficiency measurement;</li>
<li><code>setup.sh</code> is the environment setup</li>
</ul>
<h2>How to compile and run</h2>
<p>This analysis module relies on the DST tree output generated by running the reconstruction. Please note that in the reconstruction macro (see <code>$E1039_ANALYSIS/RecoDev/RecoE1039Data.C</code> for example), the <code>set_enable_eval_dst(true)</code> needs to be called for the <code><a class="el" href="../../df/df2/classSQReco.html">SQReco</a></code> module. For simplicity, we assume the generated DST file is named <code>data.root</code> and located under the same directory.</p>
<p>To build the analysis module, run <code>source setup.sh</code> after the correct E1039 offline software environment is set, then run <code>rebuild-ana</code> to compile the analysis module.</p>
<p>After that, run <code>root -l -b -q <a class="el" href="../../df/dbc/run_8C.html">run.C</a>\(-1\)</code> to run the analysis over the input DST file <code>data.root</code>. Currently all the dark photon detectors and prop. tube detectors are included. User could add more detectors by its detector name after line 51 in <code><a class="el" href="../../df/dbc/run_8C.html">run.C</a></code>. The output file name is currently hardcoded to be <code>ana.root</code> at line 35 in <code><a class="el" href="../../df/dbc/run_8C.html">run.C</a></code>. If successful, the marco should exit with <code>ana.root</code> generated at the same directory.</p>
<h2>Understanding the content of the output</h2>
<p>The output <code>ana.root</code> file is a plain ROOT ntuple file named <code>save</code> with 8 branches, user could modify the content of <code><a class="el" href="../../dc/da8/classAnaModule.html">AnaModule</a></code> to add more information. The ntuple is filled once per track per detector, thus it will contain multiple entries for the same event. The 8 branches that are currently available are:</p>
<ul>
<li><code>eventID</code>: the incrementing event ID</li>
<li><code>nHits</code>: number of hits on this track</li>
<li><code>chisq</code>: the chi squared of this track</li>
<li><code>detectorID</code>: the ID of the detector of interest, the mapping between detector ID and their names can be found in <code>$E1039_CORE/packages/geom_svc/GeomSvc.cxx</code></li>
<li><code>elementID_exp</code>: the expected elementID by projecting the track to the detector</li>
<li><code>elementID_closest</code>: the element that is fired and closest to the expected element on this detector. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="footer">
		Built by <a href="mailto:yuhw@nmsu.edu">Haiwang Yu</a></em>.
			updated: <em>Sat Nov 27 2021 15:20:52</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.5 
				with <a href="https://github.com/HaiwangYu/seaquest-offline">SeaQuest GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
