# e1039-doc

This repository manages the class reference for `e1039-core` and `e1039-analysis`.

## For Software User (= Analyzer)

The contents are available at [this page](https://e1039-collaboration.github.io/e1039-doc/master/).
The main information that you find here is the usage of all user-interface functions, namely
 - How to get or set variables of data-container classes (via class accessor), and
 - How to execute ROOT macros.

On the other hand, general explanations about analysis procedures should be found in `e1039-wiki`, such as
 - How to first use the computing environment and the software framework of E1039, and
 - How to exeute a chain of commands to analyze real and simulated data.

## For Software Developer

The contents are auto-generated by Doxygen.
All user-interface functions are encouraged to be well commented in the Doxygen style.

Probably you want to check if your new comment is rendered as you expect, before committing it to the GitHub repository.
You can use `update-gat1-doc.sh` to generate a test version on our web server.

Here are the commands to generate it.
You need not give the `-c` and `-a` options if your local repository is placed under `~/e1039/git/`.
Advanced usages can be found in the script.
```
ssh e906-gat1.fnal.gov
cd /path/to/your/e1039-doc
./update-gat1-doc.sh -c /path/to/your/e1039-core -a /path/to/your/e1039-analysis
```

You can then access it via `https://e906-gat1.fnal.gov/e1039/doxygen/kenichi/` for example.

### Old Method

A special `e1039-core` branch whose name is `doc_*` (like `doc_202006`) can be used to develop the code documentation.
Such branches can be created and updated by anyone at anytime, and occasionaly (monthly?) merged into `master`.
The class references of such branches as well as `master` are auto-generated and listed in [this page](https://e1039-collaboration.github.io/e1039-doc/).

The `master` and `doc_*` branches of `e1039-core` and the `master` branch of `e1039-analysis` are monitored every 10 minutes by crontab of `kenichi` at `spinquestana1`.
When any of the branches is found updated, its class reference is regenerated.

## Procedure for Updating Contents

The contents of the class reference are updated automatically.
The procedure for setting up the automated update is described here, but no one except the repository manager (Kenichi) has to execute it at present.
It might break the repository data.

Setup procedure: 
 1. Clone this repository into a local directory.
 1. Add `update-github-e1039-doc.sh` in it to user's crontab so as to execute the script regularly.  The script can be executed manually for test.

The exact actions of the script should be found in itself.
Below are some key points:
 - The script clones `e1039-core`, `e1039-analysis` and also `e1039-doc` under `/dev/shm`.
 - The active branch of `e1039-doc` under `/dev/shm` is switched to `gh-pages`, whose file structure is completely different from that of the `master` branch and refreshed (i.e. removed, added, committed and pushed) whenever the contents of the class reference are updated.

## Note

 - The repository size of `e1039-doc` might become too large since the `gh-pages` branch will be often updated.  When it happens, I should modify the script so as to empty the branch somehow.

## Old Texts

Documents generated by Doxygen hosted by the GitHub Pages service
[here](https://e1039-collaboration.github.io/e1039-doc/index.html).

